FROM node:19-alpine

ADD . /app

WORKDIR /app

COPY package*.json ./

ARG DATABASE_URL
ARG BCRYPT_SALT_ROUNDS
ARG ACCESS_TOKEN_SECRET
ARG RAPID_API_KEY

ENV DATABASE_URL=$DATABASE_URL
ENV BCRYPT_SALT_ROUNDS=$BCRYPT_SALT_ROUNDS
ENV ACCESS_TOKEN_SECRET=$ACCESS_TOKEN_SECRET
ENV RAPID_API_KEY=$RAPID_API_KEY

RUN npm install

COPY . .

EXPOSE 5000
CMD ["npm", "start"]